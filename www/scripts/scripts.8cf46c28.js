"use strict";angular.module("voltexMobileApp",["ui.router","PhoneGap","AngularGM"]).config(["$routeProvider","$stateProvider","$urlRouterProvider",function(a,b,c){c.otherwise("/"),b.state("main",{url:"/",views:{"main-content":{templateUrl:"views/main.html",controller:"MainCtrl"}}}).state("branch",{url:"/branch",views:{"main-content":{templateUrl:"views/branch/main.html",controller:"BranchMainCtrl"}}}).state("branch.branches",{url:"/branches",views:{"branch-content":{templateUrl:"views/branch/branches.html",controller:"BranchBranchesCtrl"}}}).state("branch.map",{url:"/map",views:{"branch-content":{templateUrl:"views/branch/map.html",controller:"BranchMapCtrl"}}}).state("lighting",{url:"/lighting",views:{"main-content":{templateUrl:"views/lighting/main.html",controller:"LightingMainCtrl"}}}).state("lighting.products",{url:"/products",views:{"lighting-content":{templateUrl:"views/lighting/products.html",controller:"LightingProductsCtrl"}}}).state("lighting.product",{url:"/product/{productId}",views:{"lighting-content":{templateUrl:"views/lighting/product.html",controller:"LightingProductCtrl"}}}).state("lighting.guide",{url:"/guide",views:{"lighting-content":{templateUrl:"views/lighting/guide.html",controller:"LightingGuideCtrl"}}}).state("lighting.terminology",{url:"/terminology",views:{"lighting-content":{templateUrl:"views/lighting/terminology.html",controller:"LightingTerminologyCtrl"}}}).state("motor",{url:"/motor",views:{"main-content":{templateUrl:"views/motor/main.html",controller:"MotorMainCtrl"}}}).state("motor.star",{url:"/star",views:{"motor-content":{templateUrl:"views/motor/star.html",controller:"MotorStarCtrl"}}}).state("motor.direct",{url:"/direct",views:{"motor-content":{templateUrl:"views/motor/direct.html",controller:"MotorDirectCtrl"}}}).state("motor.result",{url:"/result",views:{"motor-content":{templateUrl:"views/motor/result.html",controller:"MotorResultCtrl"}}}).state("gland",{url:"/gland",views:{"main-content":{templateUrl:"views/gland/main.html",controller:"GlandMainCtrl"}}}).state("gland.search",{url:"/search",views:{"gland-content":{templateUrl:"views/gland/search.html",controller:"GlandSearchCtrl"}}}).state("gland.result",{url:"/result",views:{"gland-content":{templateUrl:"views/gland/result.html",controller:"GlandResultCtrl"}}})}]).run(["$rootScope","$state","$stateParams",function(a,b,c){a.$state=b,a.$stateParams=c}]),angular.module("voltexMobileApp").controller("MainCtrl",["$rootScope","$scope","$stateParams","$state",function(a,b){b.messages=[],b.error}]),angular.module("voltexMobileApp").controller("BranchMainCtrl",["$scope","$state","$stateParams",function(a,b,c){a.display=function(a){b.transitionTo("branch."+a,c)}}]),angular.module("voltexMobileApp").controller("BranchBranchesCtrl",["$scope","$http","$stateParams","$state",function(a,b){var c=a.viewModel={location:{},error:"none",contacts:[],zoom:15,branches:[],regions:[{key:"freestate",name:"Free State"},{key:"gauteng",name:"Gauteng"},{key:"kwazulu",name:"KwaZulu Natal"},{key:"mpumalanga",name:"Mpumalanga"},{key:"northerncape",name:"Northern Cape"},{key:"northwest",name:"North West"},{key:"westerncape",name:"Western Cape"}],selected_region:{},selected_branches:[],messages:[],selected_branch:{}};a.init=function(){c.selected_region=c.regions[0],b.get("data/branches.json").success(function(b){c.branches=b,d(),a.$apply()})},a.getRegion=function(){d()},a.selectBranch=function(a){c.selected_branch=a};var d=function(){var a=_.find(c.branches,function(a){return a.region===c.selected_region.key});c.selected_branches=a?a.branches:[]}}]),angular.module("voltexMobileApp").controller("BranchMapCtrl",["$scope","$http","$stateParams","$state",function(a,b){var c=a.viewModel={location:{},error:"none",contacts:[],zoom:15,center:{lat:-26.1583395,lng:28.1278707},branches:[],points:[],regions:[{key:"freestate",name:"Free State"},{key:"gauteng",name:"Gauteng"},{key:"kwazulu",name:"KwaZulu Natal"},{key:"mpumalanga",name:"Mpumalanga"},{key:"northerncape",name:"Northern Cape"},{key:"northwest",name:"North West"},{key:"westerncape",name:"Western Cape"}],selected_region:{},selected_branches:[],messages:[]};a.init=function(){c.selected_region=c.regions[0],b.get("data/branches.json").success(function(b){c.branches=b,d(),a.$apply()})},a.getRegion=function(){d()};var d=function(){c.points=[];var a=_.find(c.branches,function(a){return a.region===c.selected_region.key});a?(c.selected_branches=a.branches,_.each(a.branches,function(a){if(a.ll){var b=a.ll.split(",");c.points.push({name:a.name,lat:b[0],lng:b[1]})}})):c.selected_branches=[]}}]),angular.module("voltexMobileApp").controller("LightingMainCtrl",["$scope","$state","$stateParams",function(a,b,c){a.display=function(a){b.transitionTo("lighting."+a,c)}}]),angular.module("voltexMobileApp").controller("LightingProductsCtrl",["$scope","$http","$stateParams","$state",function(a,b){var c=a.viewModel={error:"none",messages:[],product_types:[],types:[{name:"Floodlights"},{name:"Downlighters"},{name:"Lamps"}],selected_type:null,selected_product:null};c.selected_type=c.types[0],a.init=function(){b.get("data/light_replace.json").success(function(b){c.product_types=b,a.$apply()})},a.selectProduct=function(a){c.selected_product=a}}]),angular.module("voltexMobileApp").controller("LightingProductCtrl",["$state","$scope","$stateParams","$http",function(a,b,c,d){var e=b.viewModel={product_id:parseInt(c.productId),product_types:[],product:{},calcs:{lamps:{old:10,"new":10},hours:{old:4,"new":4},cost_kwh:{old:2,"new":2},cost_year:{old:0,"new":0},saving:0}};b.init=function(){d.get("data/light_replace.json").success(function(a){e.product_types=a,_.each(a,function(a){var b=_.find(a.products,function(a){return a.id===e.product_id});b&&(e.product=b,f())})})},b.$watch("[viewModel.calcs.lamps.old, viewModel.calcs.lamps.new, viewModel.calcs.hours.old, viewModel.calcs.hours.new, viewModel.calcs.cost_kwh.old, viewModel.calcs.cost_kwh.new]",function(a){a&&f()},!0);var f=function(){var a=e.product.old.calc_watts,c=e.product.new.calc_watts,d=e.calcs.lamps.old,f=e.calcs.lamps.new,g=e.calcs.cost_kwh.old,h=e.calcs.cost_kwh.new,i=365*e.calcs.hours.old,j=365*e.calcs.hours.new,k=a*d/1e3,l=c*f/1e3;e.calcs.cost_year.old=k*i*g,e.calcs.cost_year.new=l*j*h,e.calcs.saving=e.calcs.cost_year.old-e.calcs.cost_year.new,b.$apply()}}]),angular.module("voltexMobileApp").controller("LightingGuideCtrl",["$scope","$http","$stateParams","$state",function(a,b){var c=a.viewModel={error:"none",messages:[],guide:[],selected_guide:null};a.init=function(){b.get("data/led_guide.json").success(function(b){c.guide=b,a.$apply()})},a.selectGuide=function(a){c.selected_guide=a}}]),angular.module("voltexMobileApp").controller("LightingTerminologyCtrl",["$scope","$http","$stateParams","$state",function(a,b){var c=a.viewModel={error:"none",messages:[],terminology:[],selected_term:null};a.init=function(){b.get("data/terminology.json").success(function(b){c.terminology=b,a.$apply()})},a.selectTerm=function(a){c.selected_term=a}}]),angular.module("voltexMobileApp").controller("MotorMainCtrl",["$scope","$state","$stateParams",function(a,b,c){a.display=function(a){b.transitionTo("motor."+a,c)}}]),angular.module("voltexMobileApp").controller("MotorDirectCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("voltexMobileApp").controller("MotorStarCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("voltexMobileApp").controller("MotorResultCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("voltexMobileApp").controller("GlandMainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("voltexMobileApp").controller("GlandSearchCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("voltexMobileApp").controller("GlandResultCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("voltexMobileApp").filter("branchFilter",function(){return function(a,b){var c=_.find(a,function(a){return a.region===b.key});return c?c.branches:[]}}),angular.module("voltexMobileApp").filter("productTypeFilter",function(){return function(a,b){var c=_.find(a,function(a){return a.type===b.name});return c?c.products:[]}}),angular.module("voltexMobileApp").directive("gmap",function(){return{restrict:"E",replace:!0,template:"<div></div>",scope:{zoom:"=",center:"=",points:"="},link:function(a,b,c){function d(a,b,c){var d=new google.maps.Marker({position:new google.maps.LatLng(b,c),map:k,title:"Voltex Branch"});google.maps.event.addListener(d,"click",function(){var b=new google.maps.InfoWindow({content:a});b.open(k,d)}),i.push(d)}function e(a){for(var b=0;b<i.length;b++)i[b].setMap(a)}function f(){e(null)}function g(){f(),i=[]}var h=new google.maps.LatLng(-26.1583395,28.1278707),i=[],j={zoom:a.zoom,center:h,mapTypeId:google.maps.MapTypeId.ROADMAP},k=new google.maps.Map(document.getElementById(c.id),j);a.$watch("center",function(){a.center&&a.center.lat&&a.center.lng&&k.setCenter(new google.maps.LatLng(a.center.lat,a.center.lng))}),a.$watch("points",function(){if(a.points){g();var b=new google.maps.LatLngBounds;_.each(a.points,function(a){d(a.name,a.lat,a.lng),b.extend(new google.maps.LatLng(a.lat,a.lng)),k.fitBounds(b)})}})}}}),angular.module("PhoneGap",[]).factory("PhoneGap",["$q","$rootScope","$document",function(a,b,c){var d=a.defer();return c.bind("deviceready",function(){b.$apply(d.resolve)}),{ready:function(){return d.promise}}}]).run(["PhoneGap",function(){}]);